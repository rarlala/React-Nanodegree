# Redux Middleware

Redux Middleware를 배우고, 어떻게 Redux 라이프 사이클에 연결할 수 있는지 그리고 그것이 왜 유익한지 알아보자



만약 목표나 할일을 추가할 때, 특정 단어가 포함되면 좋지 않다고 알려주고 싶다면 아래와 같이 처리해야한다.

우리는 action이 된 순간 연결되기를 원하지만, reducer에 도달하기 전에 상태를 수정한다.



- `Redux.createStore` 바로 위에 `checkAndDispatch`를 작성한다. 만약 action.type이 일치하고 추가하려는 내용에 bitcoin이 포함되어있다면 중간에 alert를 발생시킨다. 포함되어있지 않다면 `dispatch`를 수행한다.

```react
      function checkAndDispatch(store, action) {
        if (
          action.type === ADD_TODO &&
          action.todo.name.toLowerCase().includes('bitcoin')
        ) {
          return alert("Nope. That's a bad idea.");
        }

        if (
          action.type === ADD_GOAL &&
          action.goal.name.toLowerCase().includes('bitcoin')
        ) {
          return alert("Nope. That's a bad idea.");
        }

        return store.dispatch(action);
      }

// 해당 코드 위에
      const store = Redux.createStore(
        Redux.combineReducers({
          todos,
          goals
        })
      );
```



- 그 밑에 작성된 코드 중 `store.dispatch`들을 `checkAndDispatch(store, 기존내용)`으로 바꾼다.

```react
// 기존코드
store.dispatch(
    addTodoAction({
        name,
        complete: false,
        id: generateId()
    })
);
```

```react
// 변경코드
checkAndDispatch(
    store,
    addTodoAction({
        name,
        complete: false,
        id: generateId()
    })
);
```



정상적으로 bitcoin이 들어간 글자가 포함시 alert가 표시되는 것을 확인할 수 있다.