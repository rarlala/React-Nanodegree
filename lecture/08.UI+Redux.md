# UI + Redux



## Introduction

이전 강의에서 자체 State Management 라이브러리를 구축하여 응용 프로그램의 state 예측 가능성을 향상시키는 방법을 배웠다. 이 강의에서는 State Management를 가져와서 UI를 추가한다.



## UI

지금까지는 index.js 파일에 모두 작성해왔다.

```react
// Library Code
function createStore (reducer) {

  let state
  let listeners = []

  const getState = () => state

  const subscribe = (listener) => {
    listeners.push(listener)
    return () => {
      listeners = listeners.filter((l) => l !== listener)
    }
  }

  const dispatch = (action) => {
    state = reducer(state, action)
    listeners.forEach((listener) => listener())
  }

  return {
    getState,
    subscribe,
    dispatch,
  }
}

// App Code

const ADD_TODO = 'ADD_TODO'
const REMOVE_TODO = 'REMOVE_TODO'
const TOGGLE_TODO = 'TOGGLE_TODO'
const ADD_GOAL = 'ADD_GOAL'
const REMOVE_GOAL = 'REMOVE_GOAL'

// action creators
function addTodoAction(todo) {
    return {
        type: ADD_TODO,
        todo,
    }
}

function removeTodoAction(id) {
    return {
        type: REMOVE_TODO,
        id,
    }
}

function toggleTodoAction(id) {
    return {
        type: TOGGLE_TODO,
        id,
    }
}

function addGoalAction(goal) {
    return {
        type: ADD_GOAL,
        goal,
    }
}

function removeGoalAction(id) {
    return {
        type: REMOVE_GOAL,
        id,
    }
}

function todos (state = [], action) {
  switch(action.type) {
    case ADD_TODO :
      return state.concat([action.todo])
    case REMOVE_TODO :
      return state.filter((todo) => todo.id !== action.id)
    case TOGGLE_TODO :
      return state.map((todo) => todo.id !== action.id ? todo :
        Object.assign({}, todo, { complete: !todo.complete }))
    default :
      return state
  }
}

function goals (state = [], action) {
  switch(action.type) {
    case ADD_GOAL :
      return state.concat([action.goal])
    case REMOVE_GOAL :
      return state.filter((goal) => goal.id !== action.id)
    default :
      return state
  }
}

function app (state = {}, action) {
  return {
    todos: todos(state.todos, action),
    goals: goals(state.goals, action),
  }
}

const store = createStore(app)

store.subscribe(() => {
  console.log('The new state is: ', store.getState())
})

store.dispatch(addTodoAction({
	id: 0,
    name: 'Walk the dog',
    complete: false,
}))
```



이제 우리가 하고 싶은 것은 애플리케이션에 UI를 추가하는 것이다. 이제 우리가 해야할 일은 index.html을 만든 뒤 위에서 작성한 index.js code를 index.html 내 <script> 태그를 활용해 넣어보자.



index.html

```html
<!-- index.html -->

<!DOCTYPE HTML>

<!DOCTYPE html>
<html lang="ko">
  <head>
    <title>Udacity Todos Goals</title>
  </head>
  <body>
    <script type="text/javascript">
      function createStore(reducer) {
        let state;
        let listeners = [];

        const getState = () => state;

        const subscribe = listener => {
          listeners.push(listener);
          return () => {
            listeners = listeners.filter(l => l !== listener);
          };
        };

        const dispatch = action => {
          state = reducer(state, action);
          listeners.forEach(listener => listener());
        };

        return {
          getState,
          subscribe,
          dispatch
        };
      }

      // App Code

      const ADD_TODO = 'ADD_TODO';
      const REMOVE_TODO = 'REMOVE_TODO';
      const TOGGLE_TODO = 'TOGGLE_TODO';
      const ADD_GOAL = 'ADD_GOAL';
      const REMOVE_GOAL = 'REMOVE_GOAL';

      // action creators
      function addTodoAction(todo) {
        return {
          type: ADD_TODO,
          todo
        };
      }

      function removeTodoAction(id) {
        return {
          type: REMOVE_TODO,
          id
        };
      }

      function toggleTodoAction(id) {
        return {
          type: TOGGLE_TODO,
          id
        };
      }

      function addGoalAction(goal) {
        return {
          type: ADD_GOAL,
          goal
        };
      }

      function removeGoalAction(id) {
        return {
          type: REMOVE_GOAL,
          id
        };
      }

      function todos(state = [], action) {
        switch (action.type) {
          case ADD_TODO:
            return state.concat([action.todo]);
          case REMOVE_TODO:
            return state.filter(todo => todo.id !== action.id);
          case TOGGLE_TODO:
            return state.map(todo =>
              todo.id !== action.id
                ? todo
                : Object.assign({}, todo, { complete: !todo.complete })
            );
          default:
            return state;
        }
      }

      function goals(state = [], action) {
        switch (action.type) {
          case ADD_GOAL:
            return state.concat([action.goal]);
          case REMOVE_GOAL:
            return state.filter(goal => goal.id !== action.id);
          default:
            return state;
        }
      }

      function app(state = {}, action) {
        return {
          todos: todos(state.todos, action),
          goals: goals(state.goals, action)
        };
      }

      const store = createStore(app);

      store.subscribe(() => {
        console.log('The new state is: ', store.getState());
      });

      store.dispatch(
        addTodoAction({
          id: 0,
          name: 'Walk the dog',
          complete: false
        })
      );
    </script>
  </body>
</html>
```



### What We're Going to Build

index.html 파일이 있고 모든 JavaScript 코드가 <script> 태그로 전송되었으므로 사용자 인터페이스에서 추가를 시작하겠습니다. 프로젝트에는 두 가지 상태가 있으므로 두 가지 영역이 필요합니다.



1. Todo list area
2. Goals area

![Screenshot of the Todo List app.](https://video.udacity-data.com/topher/2018/March/5abbeeea_nd019-redux-l2-basic-ui/nd019-redux-l2-basic-ui.jpg)

위 이미지는 최종적으로 만들고자하는 UI이다.



우리는 이미 애플리케이션의 Redux 부분이 작동하고 있지만 지금까지 Redux Store와 상호 작용하기 위해 코드 스니펫을 수동으로 실행했습니다. 브라우저를 사용하여 상점과 상호 작용할 수 있도록 위의 UI를 작성하십시오.



기본적으로 Library Code는 응용 프로그램의 상태를 관리한다. 아래와 같이 body 영역에 아래 코드를 추가한다.

```html
<body>
    <div>
    	<h1>Todo List</h1>
	    <input id='todo' type='text' placeholder='Add Todo' />
    	<button id='todoBtn'>Add Todo</button>
	    <ul id='todos'></ul>
  </div>
  <div>
	    <h1>Goals</h1>
	    <input id='goal' type='text' placeholder='Add Goal' />
    	<button id='goalBtn'>Add Goal</button>
	    <ul id='goals'></ul>
  </div>
    
{...}
</body>
```



### Summary

이 섹션에서는 애플리케이션에 최소한의 UI를 추가했습니다. 하지만 앱의 실제 상태는 전혀 바뀌지 않았습니다.

다음 섹션에서는 UI를 통해 컨텐츠를 입력하면 애플리케이션의 상태가 업데이트되도록 반짝이는 새로운 UI를 상태에 연결합니다.