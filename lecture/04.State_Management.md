# State Management



## Introduction

이제 세가지 새로운 React 개념을 소개 할 차례이다.

- Props

구성 요소에 데이터를 전달할 수 있다.

- Functional Components

대안적이고 아마도 기능적은 구성 요소, React Components를 생성하는 직관적인 접근 방식

- Controlled Components

응용 프로그램에서 양식을 연결할 수 있는 제어된 구성 요소



실제로 응용 프로그램을 구축하기 전에 내가 하고 싶은 것을 먼저 둘러보자. 연락처 앱을 만들건데, 입력한 연락처 목록이 있고, 각 연락처에는 아바타와 이름 및 Twitter 핸들이 있다. 우리는 검색창을 통해 연락처를 필터링 할 수 있다. 검색한 결과가 출력되는 공간에서 `Show all`링크를 클릭하면 다시 모든 연락처 화면으로 이동한다. 연락처를 삭제할 수도 있고, 새 연락처를 추가하고 싶은 경우 추가하는 버튼을 통해 해당 화면으로 이동한다. 추가하는 화면에서 이름과 번호, 작은 아이콘을 클릭해 아바타를 선택한 뒤 추가버튼을 클릭하면 추가할 수 있다. 추가된 연락처는 연락처 목록에 표시된다.

React를 사용하면 대규모 React 애플리케이션을 빌드하는 방식은 작은 응용 프로그램이나 구성 요소를 많이 구축하는 것이다. 그래서 우리는 하기 전에 Component로 분류할 경우 이 응용프로그램을 어떻게 구성할 것인지 생각해야 한다.





### 프로젝트 파일을 만들자

Create-React-App은 제거해야 할 많은 기본 파일과 시작 코드를 생성한다. 변경해야 할 두 가지 세트가 있다. starter 컨텐츠를 삭제하고 제공하는 파일을 추가하십시오.

그러나 이미 만들어왔으니 [해당 저장소](https://github.com/udacity/reactnd-contacts-app)를 복제해 시작하자.

- 복제 후 `starter-files-added` branch를 만들고, `checkout`하자



### Backend Server

우리가 구축하는 주소록 앱 프로젝트는 프런트엔드 프로젝트이다. 그러나 결국에는 백엔드 서버에 연락처를 저장하게된다. 우리는이 과정이 프론트엔드에만 중점을두기 때문에 이 프로그램의 React 부분에만 집중할 수 있도록 서버를 구축했다.

서버는 단순한 Node/Express app이다. [project repo](https://github.com/udacity/reactnd-contacts-server2)

- 서버 프로젝트를 clone 한다.
- `npm install`을 사용해 프로젝트에 필요한 것들을 설치한다.
- `node server.js`로 서버를 실행시킬 수 있다.

서버 코드는 수정하지 않을 것이다.



이제 로컬 컴퓨터에서 두 개의 서로 다른 서버를 실행해야합니다.

- 프론트엔드 개발 서버 : 포트 3000에서 액세스 가능 (`npm start`또는 `yarn start`)

- 백엔드 서버 : 포트 5001에서 액세스 가능 (`node server.js` )



## Pass Data Into Components With Props

```react
function fetchUser(username){
}
```

여기 기본 fetchUser 함수가 있다.

여기에서 함수를 가져올 사용자에게 알려야 하는데, 이는 함수 정의와 함수가 호출될 때 사용자 이름을 전달하여 매개변수를 추가하면 된다. 

function은 React 컴포넌트에도 기능을 적용할 수 있다.



```react
<User/>
```

여기 UI에 사용자를 표시하는 것이 기본 목적인 기본 React 컴포넌트가 있다. 우리는 사용자 컴포넌트에 사용자 이름을 전달하여 표시할 사용자를 알 수 있는 방법이 필요하다. 이를 위해 컴포넌트에 사용자 정의 속성을 추가하고 값을 제공할 수 있다. 이제 우리는 그 내부에서 그 가치에 접근할 수 있다.

```react
class User extends React.Component{
    render() {
        return(
        	<p>Username: {this.props.username}</p>
        )
    }
}

<User username="Tyler"/>
```

실제로 Component에 추가된 모든 속성은 해당 컴포넌트 내부에서 props objects에 접근 가능하다.



```json
const contacts = [
 {
   "id": "karen",
   "name": "Karen Isgrigg",
   "handle": "karen_isgrigg",
   "avatarURL": "http://localhost:5001/karen.jpg"
 },
 {
   "id": "richard",
   "name": "Richard Kalehoff",
   "handle": "richardkalehoff",
   "avatarURL": "http://localhost:5001/richard.jpg"
 },
 {
   "id": "tyler",
   "name": "Tyler McGinnis",
   "handle": "tylermcginnis",
   "avatarURL": "http://localhost:5001/tyler.jpg"
 }
];
```

위 연락처 배열은 일시적으로 활용할 것이다. 결국에는 백엔드 서버에서 연락처를 검색하고 저장할 것이다. 그러나 현재는 네트워크 요청을 어디에서 어떻게 해야하는지 알 수 없기 때문에, 이 배열을 활용해보겠다.



*+. app과 연락처 서버가 실행중인 상태에서 이후 단계 진행하기*



우리가 하려고 하는 것은 위 배열을 props로 사용할 새로운 구성요소를 만드는 것이다. 우선 App.js 에 위 배열을 추가해놓는다.



새로운 컴포넌트를 만들고 싶을 때마다 새로운 파일을 만들 수 있다.

ListContacts.js를 만들고, 아래 코드를 추가하자.

```react
import React, { Component } from 'react'

class ListContacts extends Component {
    render() {
        return (
        	<ol className='contact-list'>
            </ol>
        )
    }
}

export defalut ListContacts
```

render 메소드는 Components의 UI를 설명한다.

이제 우리가 생각해야할 것은 Contact의 배열을 ListContacts Component까지 어떻게 가져올 것인가이다.



App.js로 가서 방금 만든 ListContacts 모듈에서 ListContacts를 가져온다. 다음으로 contact props를 ListContacts로 전달한다.

```react
import ListContacts from './ListContacts'
```

```react
return (
	<div>
		<ListContacts contacts={contacts}
	</div>
)
```

따라서 함수에 데이터를 가져오려면 그 데이터를 인수로 전달해야 한다.

함수 호출은 Component와 비슷하다. Component에 데이터를 가져오려면 Component를 만들 때 해당 데이터를 props로 전달하는 것이다.



이제 ListContacts.js에서 render(){ 내부에 }

```react
console.log('Props', this.props)
```

를 통해 확인하면 contacts 속성이 있음을 확인할 수 있다.



이제 JavaScript를 사용하여 접점 배열과 접점 내부의 각 항목에 대해 뷰에 특정 연락처를 표시하는 목록 항목을 만들어보자.

```react
class ListContacts extends Component{
  render(){
    return (
      <ol className='contact-list'>
        {this.props.contacts.map((contact)=>(
          <li key={contact.id}>
            {contact.name}
          </li>
        ))}
      </ol>
    )
  }
}
```



이제 원하는 형태로 보여주기위해 코드를 수정해보자	

```react
class ListContacts extends Component{
  render(){
    return (
      <ol className='contact-list'>
        {this.props.contacts.map((contact)=>(
          <li key={contact.id} className='contact-list-item'>
            <div 
              className='contact-avatar'
              style={{
                backgroundImage: `url(${contact.avatarURL})`
              }}></div>
              <div className='contact-details'>
                <p>{contact.name}</p>
                <p>{contact.handle}</p>
              </div>
              <button className='contact-remove'>
                Remove
              </button>
          </li>
        ))}
      </ol>
    )
  }
}
```



>How do you pass multiple props individually to a component?
>
>다른 HTML 속성과 마찬가지로 소품을 개별적으로 전달합니다.
>
>```react
><Clock time={Date.now()} zone='MST' />
>```



### Passing Data With Props Recap

`prop`은 React 컴포넌트에 전달하는 입력이다. HTML 속성과 마찬가지로 `prop` 이름과 값이 구성 요소에 추가된다.

```react
// passing a prop to a component
<LogoutButton text='Wanna log out?'/>
```

위 코드에서 텍스트는 `prop`이며 문자열은 '로그아웃 하시겠습니까?' 값이다.

모든 소품은 `this.props` 객체에 저장된다. 컴포넌트 내부에서 `text` `prop`에 접근하기 위해 `this.props.text`를 사용한다.

```react
// access the prop inside the component
...
render() {
 return <div>{this.props.text}</div>
}
...
```



>추가 자료
>
>- https://reactjs.org/docs/components-and-props.html



## Exercises - Preface

### Workspaces

이 프로그램에서는 교실에서 배운 내용을 실습 할 수 있다. 작업 공간은 Udacity 클래스룸에 통합된 개발 환경이다. 작업 공간은 Linux 가상 머신 (Ubuntu)에서 지원한다. 터미널에 액세스 할 수 있으므로 패키지 설치 및 내용 수정을 완전히 제어 할 수 있다.



### Exercises in Workspaces

각 작업 공간에는 실습에 대한 지시 사항이 포함 된 instructions.md 파일이 있다. 각 작업 공간에는 또한 src 폴더 안에있는 가능한 솔루션 폴더가 있습니다. 스스로 운동을 마칠 때까지 가능한 솔루션 폴더를 살펴 보지 않는 것이 좋다. 이렇게하면 배운 것을 리콜하고 적용하여 자료에 대한 이해를 굳힐 수 있다.



### Preservation Information

Workspace를 처음 열면 새로운 가상 머신이 생성된다. `/ home / workspace`에서 수정 한 파일 또는 `/ home / workspace`에 추가한 새 파일은 자동으로 백업 및 저장된다. 다음에 작업 공간으로 돌아 오면 이전 변경 사항이 유지된다. 30분동안 작업영역과 상호 작용하지 않으면 작업영역이 일시중지된다.



### Restoring Your Workspace

일정 기간 동안 작업이 없으면 작업 공간이 일시 중지 된 경우 "작업 공간 깨우기"단추를 클릭하여 복원하면 된다. 데이터가 손실되지 않는다.



### Project Development

작업 공간을 일반 컴퓨터로 생각해라.

- 편집해야 할 파일을 연다 (저장은 자동으로 수행됨).
- 필요에 따라 터미널 창을 연다.
  - 터미널은 `/home/workspace`에서 시작해야하므로 필요에 따라 올바른 디렉토리로 `cd`하기.
- 프로젝트 시작 
  - 터미널을 시작하기(어디서나 CD를 쓸 필요가 없다)
  - npm install을 실행
  - npm start를 실행
- src 폴더를 열고 연습을 시작하기

- 프로젝트를 보려면 화면 왼쪽 하단에있는 "Open Preview Tab"버튼을 클릭하기.

  - npm start를 실행하면 Create React App에 URL `http://localhost:3000/`이 표시됩니다. Workspace가 가상 머신에서 실행 중이므로 브라우저에 `http://localhost:3000/`을 입력하면 VM의 로컬 호스트에 액세스 할 수 없으므로 "Open Preview Tab"단추를 사용해야한다.

  

### Committing to Github

코딩 프로젝트를 수행 할 때마다 파일을 Github에 커밋하는 것이 좋다. 작업 공간은 작업 공간 터미널을 사용하는 편리한 방법을 제공한다.

1. Workspace에서 Github으로 직접 파일을 커밋하려면 : 새로운 Github 리포지토리를 설정해라.
2. 평소처럼 Workspace 터미널을 사용하여 파일을 Github에 커밋한다. node_modules 폴더를 .gitignore 파일에 추가하는 것을 잊지 마라.



## Exercise 1 - Passing Data

**[주어진 미션]**

App.js에 작성된 profiles, users, movies 배열을 활용하여 유저별로 `Jane Cruz's favorite movie is Planet Earth 1.`와 같이 출력하기



**[작성한 코드]**

```react
class App extends Component {
  render() {
    return (
      <div>
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h1 className="App-title">ReactND - Coding Practice</h1>
        </header>
        <h2>Favorite Movies</h2>
		<ul>
          {profiles.map(profile => {
           	const userName = users[profile.userID].name;
			const FavoriteMovie = movies[profile.favoriteMovieID].name;
			return(
              <li key={profile.id}>
	              {`${userName}'s favorite movie is ${FavoriteMovie}.`}
              </li>
            );
          })}
		</ul>
      </div>
    );
  }
}
```



**[답안 코드]**

```react
class App extends Component {
  render() {
    /*Return JSX*/
    return (
        <div>
        <header className="App-header">
          <img src={logo} className="App-logo" alt="logo" />
          <h1 className="App-title">ReactND - Coding Practice</h1>
        </header>
        <ul>
          <h2>Favorite Movies</h2>

          {/*
          For each object in the profiles array, make a list of JSX elements.
          The map function returns a new array, which will
          only have list elements in it. React will automatically know how to
          render an array of JSX objects.
          */}
          {profiles.map(profile => {
            const userName = users[profile.userID].name;
            const favMovieName = movies[profile.favoriteMovieID].name;

            return (
              <li key={profile.id}>
                <p>{`${userName}\'s favorite movie is "${favMovieName}."`}</p>
              </li>
            );
          })}
        </ul>
      </div>
    );
  }
}
```

